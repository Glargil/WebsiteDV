@page
@model WebsiteDV.Pages.Administration.EditActivityModel
@{
}
<head>
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
	<link href="~/css/editentry.css" rel="stylesheet" />
</head>
<section id="editactivity-section">
    <h2 class="editactivity-title">Rediger Aktivitet</h2>
    <form method="post" class="editactivity-form">
        <input type="hidden" asp-for="ActivityID" />
        <div class="editactivity-row">
            <label for="Title" class="editactivity-label">Titel:</label>
            <input asp-for="Title" class="editactivity-input" id="Title" />
        </div>
        <div class="editactivity-row">
            <label for="Text" class="editactivity-label">Tekst:</label>
            <div id="quill-editor" style="height: 180px;"></div>
            <input type="hidden" asp-for="Text" id="Text" />
        </div>
        <div class="editactivity-row">
            <label for="Date" class="editactivity-label">Dato:</label>
            <input asp-for="Date" class="editactivity-input" id="Date" />
        </div>
        <div class="editactivity-row">
            <label for="ImgPath" class="editactivity-label">Billedsti:</label>
            <input asp-for="ImgPath" class="editactivity-input" id="ImgPath" />
        </div>
        <div class="editactivity-row">
            <label for="StartHour" class="editactivity-label">Starttid:</label>
            <input asp-for="StartHour" class="editactivity-input" id="StartHour" />
        </div>
        <div class="editactivity-row">
            <label for="EndHour" class="editactivity-label">Sluttid:</label>
            <input asp-for="EndHour" class="editactivity-input" id="EndHour" />
        </div>
        <button type="submit" class="editactivity-btn">Gem ændringer</button>
        <div style="color:red">@Model.ErrorMessage</div>
        <div style="color:green">@Model.SuccessMessage</div>
    </form>
</section>
<script>
    var quill = new Quill('#quill-editor', {
        theme: 'snow'
    });

    // Set initial value if editing
    var initialText = document.getElementById('Text').value;
    if (initialText) {
        quill.root.innerHTML = initialText;
    }

    // On form submit, update hidden input with Quill content
    document.querySelector('.editactivity-form').addEventListener('submit', function () {
        document.getElementById('Text').value = quill.root.innerHTML;
    });
</script>
